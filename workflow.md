# Инструкции для подключения Workflow

## Workflow файл

Для подключения workflow необходимо скопировать директорию `.github` в корень вашего репозитория (Можно запушить сразу в `master`).  
Теперь после каждого пуша в pull request (пуш в ветку на которой открыт pull request) будет запускать проверки, которые включают:  
- Сборка Gradle проекта
- Запуск тестов
- Проверка покрытия кода тестами (должно быть больше 80%, отчёт будет прикплеплён как комментарий в pull request)
- Генерация javadoc и публикация их в ветку `gh-pages`
- Проверка кода на соответсвие Google Java Style (замечания будут отображаться во вкладке `Files changed`

## Настройки репозитория

Для того, чтобы у вас был доступ к опубликованной документации лабороторных, необходмо зайти в `Settings > Pages` и в секции `Build and deployment` выбрать следующие параметры  
![image](https://user-images.githubusercontent.com/34095512/188311837-7168faff-b67b-4a58-afeb-1ba15552f658.png)

После этого вы сможете открывать вашу документацию по адрессу `https://<Github username>.github.io/OOP/<Lab name>/`

## Настройка `build.gradle`

Для состоваления отчётов по покрытию тестами вашего кода, необходимо подключить в ваш градл скрипт плагин `jacoco`. Для этого:
- Добавьте строчку `id 'jacoco'` в плагины
```Groovy
plugins {
    id 'java'
    id 'jacoco'
}
```
- Измените задачу `jacocoTestReport`, чтобы она генерировала отчёт в формате `.xml`, а не только `.html` (достаточно скопировать код в конец вашего `build.gradle`)
```Groovy
jacocoTestReport {
    reports {
        xml.required = true
    }
}
```
